<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=medium-dpi" />
        <title>Tasked</title>
        <link type="text/css" rel="stylesheet" href="css/jquery.mobile-1.4.2.css" />
        <link type="text/css" rel="stylesheet" href="css/index.css" />
        <style type="text/css">
        </style>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.4.2.js"></script>
        <script type="text/javascript">
        </script>
    </head>
    <body>
        <div id="indexPage" data-role="page">
            <div id="header" data-role="header"  data-position="fixed" data-tap-toggle="false">
                <h1>Tasked</h1>
                <a href="options.html" data-icon="gear" class="ui-btn-right">Options</a>
                <a href="index.html" data-icon="carat-l" data-iconpos="left" class="ui-alt-icon ui-nodisc-icon ui-shadow ui-corner-all ui-btn-b ui-icon-carat-l ui-btn-icon-left" style="display: block;">Back to List</a>
            </div>
            <div id="body" style="padding: 0px 10px;">
                <div id="display">
                    <h1 id="dtitle">Title</h1>
                    <div id="state">Open</div>
                    <div id="dcontent">Text content for the task</div>
                </div>
                <div id="edit">
                    <input id="etitle" value="Title" />
                    <textarea id="econtent">Text content for the task</textarea>
                </div>
                <div id="hold">
                    <p>How long should this be put on hold?</p>
                    <input value="" type="number" />
                    <select>
                        <option>Hours</option>
                        <option>Days</option>
                        <option>Weeks</option>
                        <option>Months</option>
                        <option>Years</option>
                    </select>
                </div>
            </div>

            <div id="footer" data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#">Edit</a></li><!-- toggle save -->
                        <li><a href="#">Hold</a></li><!-- toggle end hold -->
                        <li><a href="#popupDelete" data-rel="popup" data-position-to="window" data-transition="pop">Delete</a></li>
                        <li><a href="#popupComplete" data-rel="popup" data-position-to="window" data-transition="pop">Complete</a></li><!-- toggle reopen -->
                    </ul>
                </div>
            </div>

            <div data-role="popup" id="popupDelete" data-overlay-theme="b" data-theme="b" data-dismissible="false" style="max-width:400px;">
                <div data-role="header" data-theme="a">
                    <h1>Delete Task?</h1>
                </div>
                <div role="main" class="ui-content">
                    <h3 class="ui-title">Are you sure you want to delete this Task?</h3>
                    <p>This action cannot be undone.</p>
                    <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back" data-transition="flow">Delete</a>
                    <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Cancel</a>
                </div>
            </div>

            <div data-role="popup" id="popupComplete" data-overlay-theme="b" data-theme="b" data-dismissible="false" style="max-width:400px;">
                <div data-role="header" data-theme="a">
                    <h1>Complete Task?</h1>
                </div>
                <div role="main" class="ui-content">
                    <h3 class="ui-title">Are you sure you want to complete this task?</h3>
                    <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back" data-transition="flow">Complete</a>
                    <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Cancel</a>
                </div>
            </div>

            <script type="text/javascript">
$(document).on("pageshow", function(){
    var task = {
        title : "Test Task",
        description : "this is a test task for testing reasons",
        state : "Open",
        hold : {
            start : null,
            duration : null,
        },
    };

    $("#display").show();
    $("#dtitle").html(task.title);
    $("#dcontent").html(task.description);
    $("#state").html(task.state);
    $("#edit").hide();
    $("#hold").hide();
    
    // edit / save button
    $("#footer li:nth-child(1) a").click(function () {
        var es = $("#footer li:nth-child(1) a");
        var html = es.html();
        if (html == "Edit") {
            $("#display").hide();
            $("#edit").show();
            $("#hold").hide();
            $("#etitle").val($("#dtitle").html());
            $("#econtent").val($("#dcontent").html());
            es.html("Save"); 
        } else if (html == "Save") {
            $("#display").show();
            $("#edit").hide();
            $("#hold").hide();
            $("#etitle").val($("#dtitle").html());
            $("#dtitle").html($("#etitle").val());
            $("#dcontent").html($("#econtent").val());
            es.html("Edit"); 
        } else {
            alert(html);
        }
    });

    // Hold / End Hold button
    $("#footer li:nth-child(2) a").click(function () {
        var hold = $("#footer li:nth-child(2) a");
        var html = hold.html();
        if (html == "Hold") {
            $("#display").hide();
            $("#edit").hide();
            $("#hold").show();
            hold.html("Set Hold"); 
        } else if (html == "Set Hold") {
            $("#display").show();
            $("#edit").hide();
            $("#hold").hide();
            hold.html("End Hold"); 
            $("#state").html("On Hold");
        } else if (html == "End Hold") {
            $("#display").show();
            $("#edit").hide();
            $("#hold").hide();
            hold.html("Hold");
            $("#state").html("Open");
        } else {
            alert(html);
        }
    });
    
    // Complete / Reopen button
    $("#footer li:nth-child(4) a").click(function () {
        var cr = $("#footer li:nth-child(4) a");
        var html = cr.html();
        if (html == "Complete") {
            cr.html("Reopen"); 
            cr.attr("href", "#popupReopen"); 
            $("#state").html("Completed");
        } else if (html == "Reopen") {
            cr.html("Complete");
            cr.attr("href", "#popupComplete"); 
            $("#state").html("Open");
        } else {
            alert(html);
        }
    });
});
            </script>

            <div data-role="popup" id="popupReopen" data-overlay-theme="b" data-theme="b" data-dismissible="false" style="max-width:400px;">
                <div data-role="header" data-theme="a">
                    <h1>Reopen Task?</h1>
                </div>
                <div role="main" class="ui-content">
                    <h3 class="ui-title">Are you sure you want to Reopen this task?</h3>
                    <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back" data-transition="flow">Reopen</a>
                    <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Cancel</a>
                </div>
            </div>
        </div>
    </body>
</html>
